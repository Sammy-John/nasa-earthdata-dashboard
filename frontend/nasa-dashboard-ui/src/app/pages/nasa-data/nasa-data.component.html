<h2>NASA EarthData: {{ dataLabel }}</h2>

<form (ngSubmit)="onSubmit()" #queryForm="ngForm" class="query-form">
  <label>
    Location:
    <select [(ngModel)]="location" name="location" required>
      <option *ngFor="let loc of locations" [value]="loc">{{ loc }}</option>
    </select>
  </label>

  <label>
    Data Type:
    <select [(ngModel)]="dataType" name="dataType" required>
      <option value="T2M">Temperature (°C)</option>
    </select>
  </label>

  <label>
    Start Date:
    <input type="date" [(ngModel)]="startDate" name="startDate" required />
  </label>

  <label>
    End Date:
    <input type="date" [(ngModel)]="endDate" name="endDate" required />
  </label>

  <button type="submit" [disabled]="queryForm.invalid">Fetch Data</button>
</form>

<div *ngIf="loading">Loading data...</div>
<div *ngIf="error" style="color: red;">{{ error }}</div>

<div *ngIf="!loading && !error && data.length > 0">
  <canvas baseChart [data]="chartData" [type]="chartType"></canvas>

  <ul>
    <li *ngFor="let item of data">
      Date: {{ item.date }} — {{ dataLabel }}: {{ item.value }}
    </li>
  </ul>
</div>

<p *ngIf="!loading && !error && data.length === 0">No data found.</p>
